<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Estresse Térmico</title>
    <style>
        * { box-sizing: border-box; }
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f6f8;
            margin: 0;
            padding: 15px; /* Reduzido para mobile */
            font-size: 18px;
        }
        .container {
            max-width: 1050px;
            margin: auto;
            background-image: url("Imagem de Fundo.jpeg");
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0,0,0,0.5); 
            color: white;
            position: relative;
        }
        /* Camada escura para contraste */
        .container::before {
            content: "";
            position: absolute;
            inset: 0;
            background: rgba(0,0,0,0.65);
            border-radius: 8px;
            z-index: 0;
        }
        .container > * {
            position: relative;
            z-index: 1;
        }
        h1 {
            text-align: center;
            font-size: clamp(24px, 5vw, 40px);
            margin-bottom: 20px;
        }        
        h2 {
            text-align: center;
            font-size: clamp(24px, 5vw, 40px);
            margin-top: 5px;
        }
        /* Melhoria na Grid do Formulário */
        .form-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        @media (max-width: 768px) {
            .form-container {
                grid-template-columns: 1fr; /* Empilha em telas pequenas */
            }
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-size: 16px;
        }
        input[type="number"], select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
        }
        button {
            grid-column: 1 / -1; /* Botão ocupa largura total na grid */
            width: 100%;
            padding: 15px;
            background-color: #007bff;
            border: none;
            color: white;
            font-size: 20px;
            font-weight: bold;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
        }
        button:hover { background-color: #0056b3; }
        .resultado {
            margin-top: 20px;
            padding: 15px;
            border-radius: 4px;
            text-align: center;
            color: #d9534f; 
            font-size: 25px; 
            background-color: rgba(255,255,255,0.95);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .imagem {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            width: 100%; /* Ocupa toda a largura disponível */
            margin: 40px auto 20px auto;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1); /* Fundo leve para destaque */
            border-radius: 8px;
        }
        .imagem h2 {
            font-size: clamp(18px, 4vw, 28px); /* Título maior e dinâmico */
            margin-bottom: 10px;
        }
        .imagem img {
            width: 100%; /* Força a imagem a preencher o container */
            max-width: 1000px; /* Limite máximo para não estourar em monitores 4k */
            height: auto;
            display: block;
            border: 3px solid #fff;
            border-radius: 4px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }
        footer {
            text-align: center;
            margin-top: 30px;
            font-size: 14px;
            opacity: 0.8;
        }
    </style>
</head>
<body>
   <div class="container">
    <h1>Calculadora de Estresse Térmico</h1>
    <form id="calorForm" novalidate>
        <div class="form-group">
            <label for="Mt">Taxa de Metabolismo do Trabalho (W):</label>
            <select id="Mt" name="Mt" required>
                <option value="">Selecione</option>
                <optgroup label="Trabalho Leve">
                    <option value="153">Trabalho leve com as mãos: 153 W</option>
                    <option value="189">Trabalho leve com um braço: 189 W</option>
                    <option value="243">Trabalho leve com os dois braços: 243 W</option>
                    <option value="351">Trabalho leve com o corpo: 351 W</option>
                </optgroup>
                <optgroup label="Trabalho Moderado">
                    <option value="180">Trabalho moderado com as mãos: 180 W</option>
                    <option value="225">Trabalho moderado com um braço: 225 W</option>
                    <option value="279">Trabalho moderado com os dois braços: 279 W</option>
                    <option value="468">Trabalho moderado com o corpo: 468 W</option>
                </optgroup>
                <optgroup label="Trabalho Pesado">
                    <option value="198">Trabalho pesado com as mãos: 198 W</option>
                    <option value="261">Trabalho pesado com um braço: 261 W</option>
                    <option value="315">Trabalho pesado com os dois braços: 315 W</option>
                    <option value="630">Trabalho pesado com o corpo: 630 W</option>
                </optgroup>
            </select>
        </div>
        <div class="form-group">
            <label for="Iv">Incremento de Vestimentas (°C):</label>
            <select id="Iv" name="Iv" required>
                <option value="">Selecione</option>
                <option value="1">Macacão de poliolefina: 1</option>
                <option value="3">Vestimenta ou macacão forrado (tecido duplo): 3</option>
                <option value="12">Macacão impermeável ao vapor sobreposto à roupa de trabalho: 12</option>
            </select>
        </div>
        <div class="form-group">
            <label>IBUTGt (°C)</label>
            <input type="number" id="ibutgt" step="0.1" required>
        </div>
        <div class="form-group">
            <label>IBUTGd (°C)</label>
            <input type="number" id="ibutgd" step="0.1" required>
        </div>
        <div class="form-group">
            <button type="submit">Calcular</button>
        </div>
    </form>
    <div id="resultado" class="resultado"></div>
    <div class="imagem">
        <h2>Quadro Nº 1 - Limite de Exposição Ocupacional</h2>
        <img src="Limite de Exposição.png">
    </div>
    <footer>
        <p>&copy; 2026 WDJBarros. Todos os direitos reservados.</p>
    </footer>
    </div>

    <script>
        const QUADRO1 = [
            {m:100, ibutg:31.7},{m:101, ibutg:31.6},{m:103, ibutg:31.5},{m:105, ibutg:31.4},
            {m:106, ibutg:31.3},{m:108, ibutg:31.2},{m:110, ibutg:31.1},{m:112, ibutg:31.0},
            {m:114, ibutg:30.9},{m:115, ibutg:30.8},{m:117, ibutg:30.7},{m:119, ibutg:30.6},
            {m:121, ibutg:30.5},{m:122, ibutg:30.4},{m:125, ibutg:30.3},{m:127, ibutg:30.2},
            {m:129, ibutg:30.1},{m:132, ibutg:30.0},{m:134, ibutg:29.9},{m:136, ibutg:29.8},
            {m:138, ibutg:29.7},{m:140, ibutg:29.6},{m:143, ibutg:29.5},{m:145, ibutg:29.4},
            {m:148, ibutg:29.3},{m:150, ibutg:29.2},{m:152, ibutg:29.1},{m:155, ibutg:29.0},
            {m:158, ibutg:28.9},{m:160, ibutg:28.8},{m:163, ibutg:28.7},{m:165, ibutg:28.6},
            {m:168, ibutg:28.5},{m:171, ibutg:28.4},{m:174, ibutg:28.3},{m:177, ibutg:28.2},
            {m:180, ibutg:28.1},{m:183, ibutg:28.0},{m:186, ibutg:27.9},{m:189, ibutg:27.8},
            {m:192, ibutg:27.7},{m:195, ibutg:27.6},{m:198, ibutg:27.5},{m:201, ibutg:27.4},
            {m:205, ibutg:27.3},{m:208, ibutg:27.2},{m:212, ibutg:27.1},{m:215, ibutg:27.0},
            {m:219, ibutg:26.9},{m:222, ibutg:26.8},{m:226, ibutg:26.7},{m:230, ibutg:26.6},
            {m:233, ibutg:26.5},{m:237, ibutg:26.4},{m:241, ibutg:26.3},{m:245, ibutg:26.2},
            {m:249, ibutg:26.1},{m:253, ibutg:26.0},{m:257, ibutg:25.9},{m:262, ibutg:25.8},
            {m:266, ibutg:25.7},{m:270, ibutg:25.6},{m:275, ibutg:25.5},{m:279, ibutg:25.4},
            {m:284, ibutg:25.3},{m:289, ibutg:25.2},{m:293, ibutg:25.1},{m:298, ibutg:25.0},
            {m:303, ibutg:24.9},{m:308, ibutg:24.8},{m:313, ibutg:24.7},{m:318, ibutg:24.6},
            {m:324, ibutg:24.5},{m:329, ibutg:24.4},{m:334, ibutg:24.3},{m:340, ibutg:24.2},
            {m:345, ibutg:24.1},{m:351, ibutg:24.0},{m:357, ibutg:23.9},{m:363, ibutg:23.8},
            {m:369, ibutg:23.7},{m:375, ibutg:23.6},{m:381, ibutg:23.5},{m:387, ibutg:23.4},
            {m:394, ibutg:23.3},{m:400, ibutg:23.2},{m:407, ibutg:23.1},{m:414, ibutg:23.0},
            {m:420, ibutg:22.9},{m:427, ibutg:22.8},{m:434, ibutg:22.7},{m:442, ibutg:22.6},
            {m:449, ibutg:22.5},{m:456, ibutg:22.4},{m:464, ibutg:22.3},{m:479, ibutg:22.1},
            {m:487, ibutg:22.0},{m:495, ibutg:21.9},{m:503, ibutg:21.8},{m:511, ibutg:21.7},
            {m:520, ibutg:21.6},{m:528, ibutg:21.5},{m:537, ibutg:21.4},{m:546, ibutg:21.3},
            {m:555, ibutg:21.2},{m:564, ibutg:21.1},{m:573, ibutg:21.0},{m:583, ibutg:20.9},
            {m:593, ibutg:20.8},{m:602, ibutg:20.7}
        ];

        const REGIMES = [
            {Tt:60, Td:0},{Tt:55, Td:5},{Tt:50, Td:10},
            {Tt:45, Td:15},{Tt:40, Td:20},{Tt:30, Td:30},
            {Tt:25, Td:35},{Tt:20, Td:40},{Tt:15, Td:45},
            {Tt:10, Td:50},{Tt:5, Td:55},{Tt:0, Td:60}
        ];

        function obterLimite(mPonderado) {
        // Encontra o primeiro valor de M que é maior ou igual ao metabolismo ponderado
        const faixa = QUADRO1.find(item => item.m >= mPonderado);
        return faixa ? faixa.ibutg : 20.7; 
        }

        document.getElementById("calorForm").addEventListener("submit", function(e){ 
            e.preventDefault();
        
            const Mt = parseFloat(document.getElementById("Mt").value);
            const ibutgt = parseFloat(document.getElementById("ibutgt").value);
            const ibutgd = parseFloat(document.getElementById("ibutgd").value);
            const Iv = parseFloat(document.getElementById("Iv").value);
            const Md = 115; // Metabolismo de descanso (taxa padrão)

            if(isNaN(Mt) || isNaN(ibutgt) || isNaN(ibutgd) || isNaN(Iv)){ 
                document.getElementById("resultado").innerHTML = "Preencha todos os campos.";
                return;
            }

            let resultadoFinal = "";

            for (const r of REGIMES) {
                // Ajustado para usar as chaves corretas do objeto: Tt e Td
                const Tt = r.Tt;
                const Td = r.Td;

                // Cálculo da média ponderada em 60 minutos
                const ibutgpond = ((ibutgt * Tt) + (ibutgd * Td)) / 60;
                const Mpond = ((Mt * Tt) + (Md * Td)) / 60;

                const limite = obterLimite(Mpond);
                const ibutgAjustado = ibutgpond + Iv;

                if (ibutgAjustado <= limite) {

                    let frase = "";                                    
              
                    if (Tt > 45) {
                        frase = "✅ <b>Autorizado o trabalho contínuo</b>";                       
                                                       
                    }
                    else if (Td > 45){
                        frase = "⚠️ <b>Não é permitido o trabalho sem a adoção de medidas de proteção adequadas</b>";                        
                    }
                    else{
                        frase = `✅ <b>Regime indicado: ${Tt} minutos de trabalho / ${Td} minutos de descanso</b>`;
                        
                    }

                    resultadoFinal = `
                    <div style="margin-bottom: 15px; border-bottom: 1px dashed #ccc; padding-bottom: 10px;">
                        ${frase}<br><br>
                        IBUTG [°C]: ${ibutgpond.toFixed(1)} °C<br>
                        IBUTG [°C] + Incremento: <b>${ibutgAjustado.toFixed(1)} °C</b><br>
                        M [W]: ${Mpond.toFixed(1)} W<br>
                        Limite de Tolerância: ${limite.toFixed(1)} °C
                    </div>`;
                    break;                   
                }              
            }
           
        document.getElementById("resultado").innerHTML = resultadoFinal;
    });
    </script>
</body>        
</html>



